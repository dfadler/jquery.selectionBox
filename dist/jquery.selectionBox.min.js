/*! jQuery Selectionbox - v0.1.0 - 2012-12-06
* https://github.com/dfadler/jquery.selectionBox
* Copyright (c) 2012 Dustin Fadler; Licensed MIT */
(function(e,t,n){function o(t,n){this.element=t,this.$el=e(t),this.state=!1,this.options=e.extend({},s,n),this._defaults=s,this._name=r,this.init()}var r="selectionBox",i=t.document,s={selectContainerClass:"selection-box",optionsContainerClass:"options",optionContainerClass:"option",selectedOptionClass:"selected",currentContainerClass:"current",defaultText:"Select an option"};o.prototype={init:function(){this.wrapElement().hideSelectElement().attachCurrentContainer().setDefaultText().attachList().populateList().hideList().bind()},setCurrentContainerText:function(e){this.$current.text(e)},toggleSelectedOption:function(e){this.$options.children(".selected").length>0&&this.$options.children(".selected").removeClass("selected"),this.$options.children(":selected").length>0&&this.$options.children(":selected").attr("selected",!1),this.$options.children().eq(e).addClass(this.options.selectedOptionClass)},selectOption:function(e){this.$el.children().eq(e).attr("selected",!0),this.$el.trigger("change")},showList:function(){this.state=!0,this.$options.css("display","block")},wrapElement:function(){return this.$el.wrap("<div class="+this.options.selectContainerClass+" />"),this.$selectionBox=this.$el.parents("."+this.options.selectContainerClass),this},hideSelectElement:function(){return this.$el.css("display","none"),this},attachCurrentContainer:function(){return this.$selectionBox.append('<div class="'+this.options.currentContainerClass+'" />'),this.$current=this.$selectionBox.find("."+this.options.currentContainerClass),this},setDefaultText:function(){return this.$current.text(this.options.defaultText),this},attachList:function(){return this.$selectionBox.append('<ul class="'+this.options.optionsContainerClass+'" />'),this.$options=this.$selectionBox.find("."+this.options.optionsContainerClass),this},populateList:function(){var t=this.$selectionBox,n=this.options,r,i;return this.$el.find("option").each(function(s,o){r=e(o).text(),i='<li class="'+n.optionContainerClass+'">'+r+"</li>",t.find("."+n.optionsContainerClass).append(i)}),this},hideList:function(){return this.state=!1,this.$options.css("display","none"),this},bind:function(){var t=this;this.$selectionBox.on("click.toggleOptions",function(e){t.state?t.hideList():t.showList()}),this.$options.children().on("click.selectOption",function(n){n.stopPropagation();var r=e(this).index(),i=e(this).text();t.selectOption(r),t.toggleSelectedOption(r),t.setCurrentContainerText(i),t.hideList()})}},e.fn[r]=function(t){return this.each(function(){e.data(this,"plugin_"+r)||e.data(this,"plugin_"+r,new o(this,t))})}})(jQuery,window);