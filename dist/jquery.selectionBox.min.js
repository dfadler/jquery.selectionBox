/*! jQuery Selectionbox - v0.1.0 - 2012-11-08
* https://github.com/dfadler/jquery.selectionBox
* Copyright (c) 2012 Dustin Fadler; Licensed MIT */
(function(e,t,n){function o(t,i){this.element=t,this.$el=e(t),this.$selectionBox=n,this.$options=n,this.$current=n,this.state=!1,this.options=e.extend({},s,i),this._defaults=s,this._name=r,this.init()}var r="selectionBox",i=t.document,s={selectContainerClass:"selection-box",optionsContainerClass:"options",optionContainerClass:"option",selectedOptionClass:"selected",currentContainerClass:"current",defaultText:"Select an option"};o.prototype.init=function(){this.wrapElement(),this.hideSelectElement(),this.attachCurrentContainer(),this.setDefaultText(),this.attachList(),this.populateList(),this.hideList(),this.bind()},o.prototype.bind=function(){var t={context:this};this.$selectionBox.on("click.toggleOptions",t,function(e){e.data.context.state?e.data.context.hideList():e.data.context.showList()}),this.$options.children().on("click.selectOption",t,function(t){t.stopPropagation();var n=e(this).index(),r=e(this).text();t.data.context.selectOption(n),t.data.context.toggleSelectedOption(n),t.data.context.setCurrentContainerText(r),t.data.context.hideList()})},o.prototype.setDefaultText=function(){this.$current.text(this.options.defaultText)},o.prototype.attachCurrentContainer=function(){this.$selectionBox.append('<div class="'+this.options.currentContainerClass+'" />'),this.$current=this.$selectionBox.find("."+this.options.currentContainerClass)},o.prototype.setCurrentContainerText=function(e){this.$current.text(e)},o.prototype.toggleSelectedOption=function(e){this.$options.children(".selected").length>0&&this.$options.children(".selected").removeClass("selected"),this.$options.children(":selected").length>0&&this.$options.children(":selected").attr("selected",!1),this.$options.children().eq(e).addClass(this.options.selectedOptionClass)},o.prototype.selectOption=function(e){this.$el.children().eq(e).attr("selected",!0)},o.prototype.showList=function(){this.state=!0,this.$options.css("display","block")},o.prototype.hideList=function(){this.state=!1,this.$options.css("display","none")},o.prototype.populateList=function(){var t=this.$selectionBox,n=this.options,r,i;this.$el.find("option").each(function(s,o){r=e(o).text(),i='<li class="'+n.optionContainerClass+'">'+r+"</li>",t.find("."+n.optionsContainerClass).append(i)})},o.prototype.attachList=function(){this.$selectionBox.append('<ul class="'+this.options.optionsContainerClass+'" />'),this.$options=this.$selectionBox.find("."+this.options.optionsContainerClass)},o.prototype.wrapElement=function(){this.$el.wrap("<div class="+this.options.selectContainerClass+" />"),this.$selectionBox=this.$el.parents("."+this.options.selectContainerClass)},o.prototype.hideSelectElement=function(){this.$el.css("display","none")},e.fn[r]=function(t){return this.each(function(){e.data(this,"plugin_"+r)||e.data(this,"plugin_"+r,new o(this,t))})}})(jQuery,window);